üîç Detected Kaggle environment

üìÇ Data Directory: /kaggle/input/ob-ai-model-2-dataset/Data/mt5_exports
ÔøΩ Output Dirrectory: /kaggle/working/Data-output
‚úì Output directory ready: /kaggle/working/Data-output

================================================================================
STARTING FULL DATASET PIPELINE
================================================================================

‚ö†Ô∏è  This will process ALL symbols and timeframes
   Estimated time: 5-15 minutes depending on data size

Press Ctrl+C to cancel...

================================================================================
COMPLETE SMC DATA PIPELINE - FULL DATASET
================================================================================

üéØ Strategy: Combine ALL data for maximum generalization
   - All symbols (EURUSD, GBPUSD, USDJPY, etc.)
   - All timeframes (M15, H1, H4)
   - Single unified training dataset

================================================================================
STEP 1: CONSOLIDATING ALL MT5 EXPORT FILES
================================================================================

üìä Configuration: FULL DATASET
   - Processing ALL symbols
   - Processing ALL timeframes
   - Creating unified dataset
================================================================================
MT5 DATA CONSOLIDATION
================================================================================

üìÇ Found 68 CSV files in /kaggle/input/ob-ai-model-2-dataset/Data/mt5_exports
  ‚úì AUDJPY   M15 : 10,000 rows | 2025-05-16 16:45:00 to 2025-10-09 20:30:00
  ‚úì XAUUSD   M5  : 10,000 rows | 2025-08-20 04:00:00 to 2025-10-09 20:35:00
  ‚úì GBPUSD   M15 : 10,000 rows | 2025-05-16 15:45:00 to 2025-10-09 19:45:00
  ‚úì AUDUSD   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì USDCAD   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDJPY   H4  : 10,000 rows | 2019-05-09 16:00:00 to 2025-10-09 20:00:00
  ‚úì EURUSD   M30 : 10,000 rows | 2024-12-19 12:00:00 to 2025-10-09 19:30:00
  ‚úì USDCAD   M15 : 10,000 rows | 2025-05-16 16:00:00 to 2025-10-09 20:00:00
  ‚úì USDCHF   M5  : 10,000 rows | 2025-08-21 20:10:00 to 2025-10-09 19:55:00
  ‚úì AUDNZD   D1  : 6,524 rows | 2000-03-30 00:00:00 to 2025-10-09 00:00:00
  ‚úì EURUSD   H1  : 10,000 rows | 2024-03-04 03:00:00 to 2025-10-09 19:00:00
  ‚úì AUDCHF   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDUSD   M30 : 10,000 rows | 2024-12-19 12:30:00 to 2025-10-09 20:00:00
  ‚úì EURUSD   H4  : 10,000 rows | 2019-05-09 16:00:00 to 2025-10-09 16:00:00
  ‚úì USDJPY   M30 : 10,000 rows | 2024-12-19 12:30:00 to 2025-10-09 20:00:00
  ‚úì AUDCHF   M1  : 10,000 rows | 2025-09-30 19:57:00 to 2025-10-09 20:28:00
  ‚úì AUDNZD   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì AUDUSD   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDCAD   M30 : 10,000 rows | 2024-12-19 12:00:00 to 2025-10-09 20:00:00
  ‚úì AUDCHF   M5  : 10,000 rows | 2025-08-21 21:15:00 to 2025-10-09 20:25:00
  ‚úì AUDCAD   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì GBPUSD   M30 : 10,000 rows | 2024-12-19 12:00:00 to 2025-10-09 19:30:00
  ‚úì AUDNZD   M15 : 10,000 rows | 2025-05-16 16:30:00 to 2025-10-09 20:15:00
  ‚úì USDCAD   M30 : 10,000 rows | 2024-12-19 12:30:00 to 2025-10-09 20:00:00
  ‚úì USDCHF   M30 : 10,000 rows | 2024-12-19 12:00:00 to 2025-10-09 19:30:00
  ‚úì AUDCHF   M30 : 10,000 rows | 2024-12-19 12:30:00 to 2025-10-09 20:00:00
  ‚úì EURUSD   M1  : 10,000 rows | 2025-09-30 19:12:00 to 2025-10-09 19:52:00
  ‚úì AUDCAD   M15 : 10,000 rows | 2025-05-16 16:00:00 to 2025-10-09 20:15:00
  ‚úì AUDNZD   M30 : 10,000 rows | 2024-12-19 12:00:00 to 2025-10-09 20:00:00
  ‚úì USDJPY   M5  : 10,000 rows | 2025-08-21 20:25:00 to 2025-10-09 20:00:00
  ‚úì GBPUSD   M5  : 10,000 rows | 2025-08-21 20:10:00 to 2025-10-09 19:50:00
  ‚úì AUDCHF   D1  : 6,545 rows | 2000-03-30 00:00:00 to 2025-10-09 00:00:00
  ‚úì USDCAD   M5  : 10,000 rows | 2025-08-21 20:10:00 to 2025-10-09 20:05:00
  ‚úì XAUUSD   M30 : 10,000 rows | 2024-12-04 15:30:00 to 2025-10-09 20:30:00
  ‚úì XAUUSD   M1  : 10,000 rows | 2025-09-30 13:13:00 to 2025-10-09 20:37:00
  ‚úì USDCAD   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì GBPUSD   H1  : 10,000 rows | 2024-03-04 03:00:00 to 2025-10-09 19:00:00
  ‚úì AUDCAD   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDNZD   M5  : 10,000 rows | 2025-08-21 21:10:00 to 2025-10-09 20:15:00
  ‚úì AUDCAD   D1  : 6,614 rows | 2000-03-30 00:00:00 to 2025-10-09 00:00:00
  ‚úì USDCAD   M1  : 10,000 rows | 2025-09-30 18:07:00 to 2025-10-09 20:06:00
  ‚úì USDJPY   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDUSD   M5  : 10,000 rows | 2025-08-21 20:20:00 to 2025-10-09 20:10:00
  ‚úì USDCHF   M1  : 10,000 rows | 2025-09-30 18:54:00 to 2025-10-09 19:57:00
  ‚úì AUDUSD   M15 : 10,000 rows | 2025-05-16 16:15:00 to 2025-10-09 20:00:00
  ‚úì EURUSD   D1  : 6,637 rows | 2000-03-29 00:00:00 to 2025-10-09 00:00:00
  ‚úì XAUUSD   M15 : 10,000 rows | 2025-05-09 16:15:00 to 2025-10-09 20:30:00
  ‚úì AUDJPY   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì USDCHF   H4  : 10,000 rows | 2019-05-09 16:00:00 to 2025-10-09 16:00:00
  ‚úì AUDNZD   M1  : 10,000 rows | 2025-09-30 20:02:00 to 2025-10-09 20:17:00
  ‚úì USDJPY   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì GBPUSD   H4  : 10,000 rows | 2019-05-09 16:00:00 to 2025-10-09 16:00:00
  ‚úì AUDCAD   M1  : 10,000 rows | 2025-09-30 19:49:00 to 2025-10-09 20:23:00
  ‚úì USDCHF   H1  : 10,000 rows | 2024-03-04 03:00:00 to 2025-10-09 19:00:00
  ‚úì EURUSD   M5  : 10,000 rows | 2025-08-21 20:35:00 to 2025-10-09 19:50:00
  ‚úì AUDJPY   M5  : 10,000 rows | 2025-08-21 21:05:00 to 2025-10-09 20:30:00
  ‚úì AUDJPY   M1  : 10,000 rows | 2025-09-30 20:10:00 to 2025-10-09 20:33:00
  ‚úì AUDCAD   M5  : 10,000 rows | 2025-08-21 21:00:00 to 2025-10-09 20:20:00
  ‚úì USDJPY   M1  : 10,000 rows | 2025-09-30 18:59:00 to 2025-10-09 20:02:00
  ‚úì AUDNZD   H1  : 10,000 rows | 2024-03-04 04:00:00 to 2025-10-09 20:00:00
  ‚úì AUDUSD   M1  : 10,000 rows | 2025-09-30 18:31:00 to 2025-10-09 20:11:00
  ‚úì USDCHF   M15 : 10,000 rows | 2025-05-16 15:45:00 to 2025-10-09 19:45:00
  ‚úì AUDCHF   H4  : 10,000 rows | 2019-05-09 20:00:00 to 2025-10-09 20:00:00
  ‚úì EURUSD   M15 : 10,000 rows | 2025-05-16 16:00:00 to 2025-10-09 19:45:00
  ‚úì AUDCHF   M15 : 10,000 rows | 2025-05-16 16:30:00 to 2025-10-09 20:15:00
  ‚úì AUDJPY   M30 : 10,000 rows | 2024-12-19 12:30:00 to 2025-10-09 20:30:00
  ‚úì USDJPY   M15 : 10,000 rows | 2025-05-16 16:15:00 to 2025-10-09 20:00:00
  ‚úì GBPUSD   M1  : 10,000 rows | 2025-09-30 18:24:00 to 2025-10-09 19:52:00

üîó Consolidating 68 files...

üìä Consolidated Data Summary:
  Total rows: 666,320
  Symbols: 11
  Timeframes: 7
  Date range: 2000-03-29 00:00:00 to 2025-10-09 20:37:00

  Symbol breakdown:
    AUDCAD  : 66,614 rows
    AUDCHF  : 66,545 rows
    AUDJPY  : 60,000 rows
    AUDNZD  : 66,524 rows
    AUDUSD  : 60,000 rows
    EURUSD  : 66,637 rows
    GBPUSD  : 60,000 rows
    USDCAD  : 60,000 rows
    USDCHF  : 60,000 rows
    USDJPY  : 60,000 rows
    XAUUSD  : 40,000 rows

  Timeframe breakdown:
    D1  : 26,320 rows
    H1  : 100,000 rows
    H4  : 100,000 rows
    M1  : 110,000 rows
    M15 : 110,000 rows
    M30 : 110,000 rows
    M5  : 110,000 rows

üíæ Saved consolidated data:
  File: /kaggle/working/Data-output/consolidated_ohlc_data.csv
  Size: 39.09 MB
  Processed: 68 files
  Skipped: 0 files

‚úÖ Consolidation complete!

üéØ Next step: Run data_preparation_pipeline.py with input: /kaggle/working/Data-output/consolidated_ohlc_data.csv

‚è±Ô∏è Step 1 completed in 6.30 seconds

üìä Consolidated Dataset Statistics:
   Total rows: 666,320
   Symbols: 11
   Timeframes: 7
   Date range: 2000-03-29 00:00:00 to 2025-10-09 20:37:00

================================================================================
STEP 2: PROCESSING SMC FEATURES - FULL DATASET
================================================================================

üîß Feature Engineering based on:
   Institutional-Grade_Quantification_and_Normalization_of_Smart_Money_Concepts_(SMC)
üß† Fuzzy Logic SMC Detection Active
   Quality threshold: 0.2

üìã Pipeline Configuration:
   Base Timeframe: M15
   Higher Timeframes: H1, H4
   ATR Period: 14
   Risk:Reward Ratio: 1:2.0
   Lookforward Period: 20 candles
   Quality Threshold: 0.2

================================================================================
INSTITUTIONAL-GRADE SMC DATA PREPARATION PIPELINE
With Fuzzy Logic Integration
================================================================================

üìÇ Loading raw data from: /kaggle/working/Data-output/consolidated_ohlc_data.csv
‚úì Loaded 666,320 rows
  Symbols: 11
  Timeframes: ['D1', 'H1', 'H4', 'M1', 'M15', 'M30', 'M5']
  Date range: 2000-03-29 00:00:00 to 2025-10-09 20:37:00

üîß Processing SMC features for all symbols and timeframes...

  Phase 1: Processing individual timeframes...
  Processing AUDCAD D1...
    ‚úì Valid entries: 957, Labeled: 957
  Processing AUDCAD H1...
    ‚úì Valid entries: 1255, Labeled: 1255
  Processing AUDCAD H4...
    ‚úì Valid entries: 1303, Labeled: 1303
  Processing AUDCAD M1...
    ‚úì Valid entries: 1228, Labeled: 1228
  Processing AUDCAD M15...
    ‚úì Valid entries: 1301, Labeled: 1301
  Processing AUDCAD M30...
    ‚úì Valid entries: 1284, Labeled: 1284
  Processing AUDCAD M5...
    ‚úì Valid entries: 1334, Labeled: 1334
  Processing AUDCHF D1...
    ‚úì Valid entries: 895, Labeled: 895
  Processing AUDCHF H1...
    ‚úì Valid entries: 1242, Labeled: 1242
  Processing AUDCHF H4...
    ‚úì Valid entries: 1335, Labeled: 1335
  Processing AUDCHF M1...
    ‚úì Valid entries: 1194, Labeled: 1194
  Processing AUDCHF M15...
    ‚úì Valid entries: 1305, Labeled: 1305
  Processing AUDCHF M30...
    ‚úì Valid entries: 1350, Labeled: 1350
  Processing AUDCHF M5...
    ‚úì Valid entries: 1317, Labeled: 1317
  Processing AUDJPY D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing AUDJPY H1...
    ‚úì Valid entries: 1329, Labeled: 1329
  Processing AUDJPY H4...
    ‚úì Valid entries: 1344, Labeled: 1344
  Processing AUDJPY M1...
    ‚úì Valid entries: 1310, Labeled: 1310
  Processing AUDJPY M15...
    ‚úì Valid entries: 1298, Labeled: 1298
  Processing AUDJPY M30...
    ‚úì Valid entries: 1323, Labeled: 1323
  Processing AUDJPY M5...
    ‚úì Valid entries: 1354, Labeled: 1354
  Processing AUDNZD D1...
    ‚úì Valid entries: 817, Labeled: 817
  Processing AUDNZD H1...
    ‚úì Valid entries: 1223, Labeled: 1223
  Processing AUDNZD H4...
    ‚úì Valid entries: 1277, Labeled: 1277
  Processing AUDNZD M1...
    ‚úì Valid entries: 1096, Labeled: 1096
  Processing AUDNZD M15...
    ‚úì Valid entries: 1238, Labeled: 1238
  Processing AUDNZD M30...
    ‚úì Valid entries: 1200, Labeled: 1200
  Processing AUDNZD M5...
    ‚úì Valid entries: 1264, Labeled: 1264
  Processing AUDUSD D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing AUDUSD H1...
    ‚úì Valid entries: 1309, Labeled: 1309
  Processing AUDUSD H4...
    ‚úì Valid entries: 1375, Labeled: 1375
  Processing AUDUSD M1...
    ‚úì Valid entries: 1239, Labeled: 1239
  Processing AUDUSD M15...
    ‚úì Valid entries: 1293, Labeled: 1293
  Processing AUDUSD M30...
    ‚úì Valid entries: 1363, Labeled: 1363
  Processing AUDUSD M5...
    ‚úì Valid entries: 1363, Labeled: 1363
  Processing EURUSD D1...
    ‚úì Valid entries: 980, Labeled: 980
  Processing EURUSD H1...
    ‚úì Valid entries: 1232, Labeled: 1232
  Processing EURUSD H4...
    ‚úì Valid entries: 1225, Labeled: 1225
  Processing EURUSD M1...
    ‚úì Valid entries: 1248, Labeled: 1248
  Processing EURUSD M15...
    ‚úì Valid entries: 1357, Labeled: 1357
  Processing EURUSD M30...
    ‚úì Valid entries: 1312, Labeled: 1312
  Processing EURUSD M5...
    ‚úì Valid entries: 1369, Labeled: 1369
  Processing GBPUSD D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing GBPUSD H1...
    ‚úì Valid entries: 1207, Labeled: 1207
  Processing GBPUSD H4...
    ‚úì Valid entries: 1262, Labeled: 1262
  Processing GBPUSD M1...
    ‚úì Valid entries: 1264, Labeled: 1264
  Processing GBPUSD M15...
    ‚úì Valid entries: 1347, Labeled: 1347
  Processing GBPUSD M30...
    ‚úì Valid entries: 1279, Labeled: 1279
  Processing GBPUSD M5...
    ‚úì Valid entries: 1380, Labeled: 1380
  Processing USDCAD D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing USDCAD H1...
    ‚úì Valid entries: 1243, Labeled: 1243
  Processing USDCAD H4...
    ‚úì Valid entries: 1281, Labeled: 1281
  Processing USDCAD M1...
    ‚úì Valid entries: 1125, Labeled: 1125
  Processing USDCAD M15...
    ‚úì Valid entries: 1285, Labeled: 1285
  Processing USDCAD M30...
    ‚úì Valid entries: 1332, Labeled: 1332
  Processing USDCAD M5...
    ‚úì Valid entries: 1354, Labeled: 1354
  Processing USDCHF D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing USDCHF H1...
    ‚úì Valid entries: 1186, Labeled: 1186
  Processing USDCHF H4...
    ‚úì Valid entries: 1229, Labeled: 1229
  Processing USDCHF M1...
    ‚úì Valid entries: 1246, Labeled: 1246
  Processing USDCHF M15...
    ‚úì Valid entries: 1279, Labeled: 1279
  Processing USDCHF M30...
    ‚úì Valid entries: 1342, Labeled: 1342
  Processing USDCHF M5...
    ‚úì Valid entries: 1373, Labeled: 1373
  Processing USDJPY D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing USDJPY H1...
    ‚úì Valid entries: 1287, Labeled: 1287
  Processing USDJPY H4...
    ‚úì Valid entries: 1266, Labeled: 1266
  Processing USDJPY M1...
    ‚úì Valid entries: 1287, Labeled: 1287
  Processing USDJPY M15...
    ‚úì Valid entries: 1309, Labeled: 1309
  Processing USDJPY M30...
    ‚úì Valid entries: 1343, Labeled: 1343
  Processing USDJPY M5...
    ‚úì Valid entries: 1370, Labeled: 1370
  Processing XAUUSD D1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing XAUUSD H1...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing XAUUSD H4...
    ‚ö†Ô∏è Insufficient data (0 rows), skipping
  Processing XAUUSD M1...
    ‚úì Valid entries: 1439, Labeled: 1439
  Processing XAUUSD M15...
    ‚úì Valid entries: 1340, Labeled: 1340
  Processing XAUUSD M30...
    ‚úì Valid entries: 1313, Labeled: 1313
  Processing XAUUSD M5...
    ‚úì Valid entries: 1425, Labeled: 1425

  Phase 2: Adding multi-timeframe confluence...

‚úì Processing complete: 519,870 total rows

üîç Validating Pipeline Output...

======================================================================
  ‚úì OB Detection
  ‚úì OB Displacement
  ‚úì FVG Detection
  ‚úì Market Structure
  ‚úì TBM Labeling
  ‚úì MTF Confluence
  ‚úì Regime Classification
  ‚úì Feature Standardization
  ‚úì Fuzzy Logic
  ‚úì Has Labeled Data
======================================================================

‚úÖ All validation checks passed!

üìä INSTITUTIONAL-GRADE SMC PIPELINE SUMMARY
================================================================================

üìà Dataset Overview:
  Total rows: 519,870
  Symbols: 11
  Timeframes: ['M15', nan, 'H1', 'H4']
  Date range: 2019-05-09 16:00:00 to 2025-10-09 20:30:00

üèõÔ∏è SMC Structures Detected (Fuzzy Logic):
  Order Blocks (Bullish): 19,843.0
  Order Blocks (Bearish): 19,998.0
  Fair Value Gaps (Bullish): 10,201.0
  Fair Value Gaps (Bearish): 9,975.0

üìê Market Structure (BOS & ChoCH):
  BOS Wick Breaks: 104,139.0
  BOS Close Breaks (High Conviction): 49,937.0
  BOS Commitment Flags: 49,937.0
  ChoCH Detected: 20,535.0

üß† Fuzzy Logic Quality Scores:
  Order Block Quality:
    Average: 0.546
    Min: 0.200, Max: 1.000
    Median: 0.521
  Fair Value Gap Quality:
    Average: 0.611
    Min: 0.200, Max: 1.000
    Median: 0.621

üîó Multi-Timeframe Confluence:
  Setups with HTF OB Confluence: 0
  Setups with HTF FVG Confluence: 0
  Setups with HTF Trend Alignment: 319,870

‚úÖ Valid Setups (After Regime Filtering):
  Valid Bullish OBs: 2,396
  Valid Bearish OBs: 2,281
  Valid Bullish FVGs: 2,620
  Valid Bearish FVGs: 2,470

üéØ Triple Barrier Method (TBM) Labels:
  Total labeled entries: 39,762
    Loss    :  9,009 ( 22.7%)
    Timeout :     31 (  0.1%)
    Win     : 30,722 ( 77.3%)

  Win Rate (excl. timeouts): 77.3%
  Loss Rate (excl. timeouts): 22.7%
  Average Bars to Hit Target: 1.8

üåê Market Regime Distribution (Fuzzy Logic):
  Normal              :  115,950 ( 22.3%)
  Low_Vol             :   91,964 ( 17.7%)
  High_Vol            :   39,267 (  7.6%)
  Low_Vol_Chop        :   37,568 (  7.2%)
  High_Vol_Trend      :   25,251 (  4.9%)

üìä Feature Engineering (ATR Normalization + Z-Score):
  Z-Score Standardized Features: 9
    - OB_Displacement_Mag_ZScore
    - ATR_ZScore
    - OB_Displacement_ATR_ZScore
    - Displacement_Mag_ZScore
    - OB_Size_ATR_ZScore
    ... and 4 more

================================================================================

‚úÖ PIPELINE VALIDATION:
  ‚úì Order Block Detection (with displacement validation)
  ‚úì Fair Value Gap Detection (with mitigation tracking)
  ‚úì Market Structure (BOS & ChoCH)
  ‚úì Triple Barrier Method Labeling
  ‚úì Multi-Timeframe Confluence
  ‚úì Contextual Filtering & Regime Classification
  ‚úì ATR Normalization + Z-Score Standardization
  ‚úì Fuzzy Logic Integration (adaptive thresholds)

================================================================================

üíæ Saving processed data to: /kaggle/working/Data-output/processed_smc_data.csv
‚úì Saved full dataset: 519,870 rows (225.57 MB)

üìä Splitting data with fuzzy quality stratification...
  AUDCAD: Stratified by fuzzy quality (3 strata)
  ‚ö†Ô∏è Skipping nan - insufficient data
  AUDCHF: Stratified by fuzzy quality (3 strata)
  AUDJPY: Stratified by fuzzy quality (3 strata)
  AUDNZD: Stratified by fuzzy quality (3 strata)
  AUDUSD: Stratified by fuzzy quality (3 strata)
  EURUSD: Stratified by fuzzy quality (3 strata)
  GBPUSD: Stratified by fuzzy quality (3 strata)
  USDCAD: Stratified by fuzzy quality (3 strata)
  USDCHF: Stratified by fuzzy quality (3 strata)
  USDJPY: Stratified by fuzzy quality (3 strata)
  XAUUSD: Stratified by fuzzy quality (3 strata)
  TRAIN: 76,982 rows, Quality Œº=0.072 œÉ=0.197
  VAL: 16,500 rows, Quality Œº=0.072 œÉ=0.198
  TEST: 16,518 rows, Quality Œº=0.072 œÉ=0.197
  Using fuzzy quality stratification
‚úì Saved train split: 76,982 rows (49.94 MB)
‚úì Saved val split: 16,500 rows (10.72 MB)
‚úì Saved test split: 16,518 rows (10.73 MB)

üîç Validating fuzzy quality distribution across splits...

  OB_Quality_Fuzzy:
    Split    Mean     Std      Q25      Q50      Q75     
    --------------------------------------------------------
    train    0.072    0.197    0.000    0.000    0.000   
    val      0.072    0.198    0.000    0.000    0.000   
    test     0.072    0.197    0.000    0.000    0.000   

  FVG_Quality_Fuzzy:
    Split    Mean     Std      Q25      Q50      Q75     
    --------------------------------------------------------
    train    0.049    0.178    0.000    0.000    0.000   
    val      0.051    0.181    0.000    0.000    0.000   
    test     0.052    0.182    0.000    0.000    0.000   

  Distribution Consistency Check:
    ‚úì OB_Quality_Fuzzy: Train-Test difference = 0.4%
    ‚úì FVG_Quality_Fuzzy: Train-Test difference = 5.2%
‚úì Saved quality statistics
‚úì Saved feature list: 68 features

‚úÖ Pipeline complete! Data ready for ML training.

üìä Processed Dataset Statistics:
   Total samples: 519,870
   Features: 92
   Symbols: 11

üìà Label Distribution:
   Win (1):     30,722 (5.9%)
   Loss (-1):   9,009 (1.7%)
   Timeout (0): 31 (0.0%)

================================================================================
‚úÖ PIPELINE COMPLETE - FULL DATASET READY!
================================================================================

‚è±Ô∏è Execution Time:
  Step 1 (Consolidation): 6.30s (0.1 min)
  Step 2 (SMC Processing): 1752.39s (29.2 min)
  Total: 1758.69s (29.3 minutes)

üìÅ Output Files:

  1. Consolidated OHLC Data:
     /kaggle/working/Data-output/consolidated_ohlc_data.csv
     (666,320 rows)

  2. Processed SMC Features:
     /kaggle/working/Data-output/processed_smc_data.csv
     (519,870 samples, 92 features)

  3. Train/Val/Test Splits:
     Train: /kaggle/working/Data-output/processed_smc_data_train.csv (76,982 samples)
     Val:   /kaggle/working/Data-output/processed_smc_data_val.csv (16,500 samples)
     Test:  /kaggle/working/Data-output/processed_smc_data_test.csv (16,518 samples)

     Split Ratios:
     Train: 70.0%
     Val:   15.0%
     Test:  15.0%

  4. Feature Documentation:
     /kaggle/working/Data-output/processed_smc_data_feature_list.txt
     /kaggle/working/Data-output/processed_smc_data_quality_stats.txt

üéØ NEXT STEPS - Model Training:

  1. Review Data Quality:
     - Check processed_smc_data_quality_stats.txt
     - Verify label distribution is balanced
     - Confirm sufficient samples per symbol

  2. Train Models:
     python train_all_models.py
     
     This will train:
     - RandomForest (with cross-validation)
     - XGBoost (with early stopping)
     - Neural Network (simplified architecture)
     - LSTM (removed due to instability)

  3. Model Outputs:
     - Trained models: models/trained/*.pkl
     - Training metrics: models/trained/training_results.json
     - Overfitting report: models/trained/overfitting_report.md
     - Deployment manifest: models/trained/deployment_manifest.json

  4. Prediction Target:
     TBM_Label:
     - Win (1):     Trade hits take profit
     - Loss (-1):   Trade hits stop loss
     - Timeout (0): Trade expires without hitting either

üìö Feature Engineering Details:
   Based on: Institutional-Grade SMC Quantification
   - Order Blocks (OB): Institutional accumulation zones
   - Fair Value Gaps (FVG): Market imbalances
   - Break of Structure (BOS): Trend continuation
   - Change of Character (ChoCH): Trend reversal
   - All features normalized by ATR for stationarity

‚úÖ Dataset ready for training!
================================================================================

================================================================================
SUCCESS! Pipeline completed successfully
================================================================================

Processed 519,870 samples
Ready for model training with train_all_models.py